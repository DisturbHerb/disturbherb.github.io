var triggerError=attachErrorHandler("stationNamer",!0);$(document).ready((function(){var e=$("#stationNameChanger"),t=e.find(".input-area"),n=$("#station-name"),r=t.find(".error-message"),a=t.find('button[type="submit"]'),i=t.find(".randomise"),o=$.parseJSON($("#whitelist-json").text()),s=[],l=!1,d=!1,m=0,u=!1,c=[].concat(o.Admins,o["Frontier Locations"],o["Frontier Bodies"],o["Sol System Bodies"],o.Organizations,o.Countries,o.Directions,o.Greek,o["Military Letters"],o["Misc. Nonsense"],o.Nouns,o.Numbers,o["Petting Zoo Animals"],o.Verbs),h="<h2>Whitelist</h2>";$.each(o,(function(e,t){h+="<h3>"+e+"</h3>",h+="<p>",$.each(t,(function(e,n){h+=n.toLowerCase()+(e<t.length-1?", ":""),s.push(n.toLowerCase())})),h+="</p>"})),$(".whitelist").html(h),$("#content").nanoScroller();var f=function(){l=!0,n.removeClass("error").addClass("valid"),r.html("&nbsp;"),a.removeAttr("disabled")},v=function(e){l=!1,n.removeClass("valid").addClass("error"),r.html(e),a.attr("disabled","disabled")};function g(e){return e[Math.floor(Math.random()*e.length)]}n.on("keyup",(function(){var e=$.trim(n.val());if(e.length<1||e.length>m)return v("Name must be between 0 and "+(m+1)+" characters.");if(u)return f();for(var t=e.split(" "),r=0;r<t.length;r++){var a=t[r];if(!$.isNumeric(a)&&-1===$.inArray(a.toLowerCase(),s))return v('"'+a+'" is an invalid word!')}f()})),i.on("click",(function(){var e=function(){for(var e,t=g(o.Prefixes),n=g(o.Adjectives),r=g(o.Suffixes),a=(t+n+r).length+3,i=!1;!i;)i=(e=g(c)).length<=m-a;return t+" "+n+" "+e+" "+r}();n.val(e).trigger("keyup")})),t.on("submit",(function(e){e.preventDefault(),d||l&&(d=!0,window.location=t.attr("action")+$.param({newName:$.trim(n.val())}))})),m=parseInt(n.attr("maxlength")),u="1"===$("#admin-user").val(),n.focus(),u&&e.find(".tips").addClass("admin-mode").html("Admin mode is on, there are no restrictions, go nuts!")}));
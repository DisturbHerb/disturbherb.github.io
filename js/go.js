var main,color,globalx,globaly,globaltile,initlist=json;function byond(){url="?src="+srcRef,currentIsKey=!0;for(var e=0;e<arguments.length;e++)currentIsKey?url+=";":url+="=",url+=arguments[e],currentIsKey=!currentIsKey;console.log(url);var t=new XMLHttpRequest;t.open("GET",url),t.send()}removepiece=function(e){for(var t=document.getElementsByTagName("img"),o=0;o<t.length;o++)if(t[o].dataset.loc&&t[o].dataset.loc==e){t[o].parentElement.removeChild(t[o]);break}};var piececlick=function(e){e.preventDefault();var t=e.srcElement;t.parentElement.removeChild(t),byond("command","remove","position",t.dataset.loc,"color",t.dataset.color)};createpiece=function(e,t,o,l,n,a){if(null==n&&(n="primary"),"secondary"==n){var i=(l=document.getElementById(a)).coords.split(",");e=i[0],t=i[1]}var c=document.createElement("img");c.src="white"==o?"https://disturbherb.github.io/images/go/gowhite.png?v=1":"https://disturbherb.github.io/images/go/goblack.png?v=1",c.style.position="absolute",c.style.left=e+"px",c.style.top=t+"px",c.dataset.loc=l.id,c.dataset.color=o,c.dataset.offsetx=l.dataset.offsetx,c.dataset.offsety=l.dataset.offsety,c.onclick=piececlick,main.appendChild(c),"secondary"!=n&&byond("command","piecelog","offsetx",c.dataset.offsetx,"offsety",c.dataset.offsety,"position",l.id,"color",o)},checkhand=function(e){createpiece(globalx,globaly,e,globaltile),globalx=null,globaly=null,globatile=null};var gridclick=function(e){e.preventDefault();var t=e.srcElement.coords.split(",");globalx=t[0],globaly=t[1],globaltile=e.srcElement,byond("command","checkhand")};function windowclose(){byond("command","close")}window.onload=function(e){document.body.scroll="no";var t=document.getElementById("map");main=document.getElementById("main");for(var o=-10,l=30,n=31,a=71,i=0,c=13,r=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N"),s=0;s<169;s++){var d=document.createElement("area");if(d.shape="rect",13==c&&0!=i){o=-10,l=30,n=31,a=71;for(var m=0;m<i;m++)n+=41,a+=41}o+=41,l+=41,d.coords=o+","+n+","+l+","+a,d.id=r[i]+c,d.dataset.offsetx=2*(c-1),d.dataset.offsety=2*i,d.href="https://google.com",d.onclick=gridclick,t.appendChild(d),1==c?(c=13,i++):c--}if(initlist&&initlist.length)for(s=0;s<initlist.length;s++){var f=document.getElementById(initlist[s].position),g=f.coords.split(",");o=g[0],n=g[1];createpiece(o,n,initlist[s].color,f)}},window.onbeforeunload=windowclose;
!function(e){var t="execute";function a(e){return function(t){try{e(t)}catch(n){a=n,o("reportError",{message:a})}var a}}function o(e,t){void 0===t&&(t={});var a=[];for(var o in t)t.hasOwnProperty(o)&&a.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));var n="?src="+ref+";action="+e+";"+a.join(";");window.location=n}function n(){return e("#code-input").val()}function c(a){var c=e(a.currentTarget).data("btn-id");switch(t){case"load":!function(e){o("loadCode",{id:e})}(c);break;case"save":!function(e){o("saveCode",{id:e,code:n()})}(c);break;case"execute":!function(e){o("executeCode",{id:e})}(c)}r("execute")}function r(a){a!==t&&("execute"==a&&(e("#butt-save").removeClass("active"),e("#butt-load").removeClass("active")),"load"==a&&(e("#butt-save").removeClass("active"),e("#butt-load").addClass("active")),"save"==a&&(e("#butt-load").removeClass("active"),e("#butt-save").addClass("active")),t=a)}function s(){r("load")}function i(){r("save")}function u(e){o("abortCode",{id:e,message:"Aborted by user"})}function d(t){o("reservoir",{id:e(t.currentTarget||t.target||t.srcElement).data("id")})}window.onload=function(){o("getUIState"),e("#butt-load").on("click",a(s)),e("#butt-save").on("click",a(i)),e("#butt-abort").on("click",a(u)),e(".btn-c").on("click",a(c)),e(".reservoir-button").on("click",a(d))},window.loadCodeCallback=function(){r("execute")},window.saveCodeCallback=function(){r("execute")},window.setUIState=function(t){var a,o;for(t=JSON.parse(t),a=1;a<=10;a++){var n=e("#reservoir-"+a);t.reservoirs[a]?n.addClass("btn-primary").removeClass("btn-default"):n.addClass("btn-default").removeClass("btn-primary")}for(a=1;a<=6;a++){var c=e("#butt-"+a);t.buttons[a]?c.addClass("btn-success").removeClass("btn-default"):c.addClass("btn-default").removeClass("btn-success")}o=(o=decodeURIComponent(t.output))||"",e("#code-input").html(o),e("#sx-input").val(t.sx),e("#tx-input").val(t.tx),e("#ax-input").val(t.ax)},window.setRef=function(e){ref=e}}(jQuery);
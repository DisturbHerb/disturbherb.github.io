function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var StateManager=function(){var e=function(){function e(e,t){if("function"!=typeof e)throw new TypeError('Unexpected "callback" argument of type "'+_typeof(e)+'"; expected function.');if(this._callback=e,null==t)this._fields=null;else if("string"==typeof t)this._fields=[t];else{if(!Array.isArray(t))throw new TypeError('Unexpected "fields" argument of type "'+_typeof(t)+'"; expected undefined, null, string, or array of strings.');for(fieldIndex=0;fieldIndex<t.length;fieldIndex++)if(field=t[fieldIndex],"string"!=typeof field)throw new TypeError('Unexpected member of "fields" argument at index '+fieldIndex+' of type "'+("undefined"==typeof field?"undefined":_typeof(field))+'"; expected string.');this._fields=t}}return e.prototype._fire=function(e){this._callback(e)},e.prototype.trigger=function(e,t){var r,i,n;if(null===this._fields)this._fire(t);else if(Array.isArray(this._fields))for(n=Object.keys(e),i=0;i<n.length;i++)if(r=n[i],this._fields.includes(r)){this._fire(t);break}},e}();function t(e){this._state=Object.assign({},e||{}),this._stateListeners=[]}return t.prototype.addStateListener=function(t,r){var i;return i=new e(t,r),this._stateListeners.push(i),i},t.prototype.getState=function(e){var t,r;if(void 0===e)return r={},Object.assign(r,this._state);if("string"==typeof e)(r={})[e]=this._state[e];else{if(!Array.isArray(e))throw new TypeError('Unexpected "fields" argument of type "'+_typeof(e)+'"; expected undefined, string, or array of strings.');for(r={},t=0;t<e.length;t++){var i;r[i=e[t]]=this._state[i]}}return r},t.prototype.removeStateListener=function(e){var t;for(t=0;t<this._stateListeners.length;t++)if(this._stateListeners[t]===e){this._stateListeners.splice(t,1);break}},t.prototype.setState=function(e){var t,r,i,n,s;if(e){if(t={},"object"!==_typeof(s="function"==typeof e?e(this._state):e))throw new TypeError('Unexpected argument of type "'+_typeof(e)+'" passed to setState; expected function or object.');for(n=Object.keys(s),i=0;i<n.length;i++)r=n[i],this._state[r]!==e[r]&&(t[r]=e[r]);Object.assign(this._state,t),this._triggerStateListeners(t)}},t.prototype._triggerStateListeners=function(e){var t;if(Object.keys(e).length>0)for(t=0;t<this._stateListeners.length;t++)this._stateListeners[t].trigger(e,this._state)},t}();
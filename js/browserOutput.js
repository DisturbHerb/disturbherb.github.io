function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var $messages,$subOptions,$contextMenu,$filterMessages,$playMusic,$lastEntry,triggerError=attachErrorHandler("chatDebug",!0),escaper=encodeURIComponent||escape,decoder=decodeURIComponent||unescape;window.status="Output";var opts={messageCount:0,messageLimit:4e3,scrollSnapTolerance:20,clickTolerance:10,popups:0,wasd:!1,chatMode:"default",priorChatHeight:0,restarting:!1,volume:.5,lastMessage:"",maxStreakGrowth:20,messageClasses:["admin","combat","radio","say","ooc","internal"],msgOdd:!1,subOptionsLoop:null,suppressOptionsClose:!1,highlightTerms:[],highlightLimit:10,highlightColor:"#FFFF00",pingDisabled:!1,messageLimitEnabled:!0,oddMsgHighlight:!1,pingCounter:0,pingLimit:10,pingTime:0,pongTime:0,noResponse:!1,noResponseCount:0,mouseDownX:null,mouseDownY:null,preventFocus:!1,adminLoaded:!1,clientDataLimit:5,clientData:[],currentTheme:"theme-default"},themes={"theme-default":"Windows 3.1 (default)","theme-dark":"Dark"};function createHighlightMarkup(){var e="";return opts.highlightColor&&(e+=' style="background-color: '+opts.highlightColor+'"'),'<span class="highlight"'+e+"></span>"}function getTextNodes(e,t){var o=$([]);return $(e).contents().each((function(e,s){o=3===s.nodeType&&/\S/.test(s.nodeValue)&&-1!==s.nodeValue.search(t)?o.add(s):o.add(getTextNodes(s,t))})),o}function highlightTerms(e){var t=new RegExp("("+opts.highlightTerms.join("|")+")","gi");getTextNodes(e,t).each((function(e,o){var s=$(o),i=s.text(),n=s.parent(),a=$(o.previousSibling);s.remove(),i.split(t).forEach((function(e){var o=null;if(t.test(e)){var s=$(createHighlightMarkup());s.text(e),o=s}else o=document.createTextNode(e);if(0==a.length){var i=n.prepend(o);a=$(i[0].firstChild)}else a.after(o),a=$(a[0].nextSibling)}))}))}function handleStreakCounter(e){var t=e.find(".streak-counter");if(t.length){var o=t.data("count");o++,t.text("x"+o).data("count",o),o<=opts.maxStreakGrowth&&e.css("font-size",1+.05*o+"em")}else e.css("font-size","1.1em").append($("<span>",{"class":"streak-counter",text:"x2"}).data("count",2))}function parseEmojis(e){return e.replace(/((?:\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])+)/g,'<span class="emoji">$1</span>')}function output(e,t,o,s){if(void 0!==e){void 0===t&&(t=""),("string"==typeof o||o instanceof String)&&(o=parseInt(o)),("string"==typeof s||s instanceof String)&&(s=parseInt(s));var i=!1;if(!o){var n=$("body").height(),a=$messages.outerHeight();if(n+document.documentElement.scrollTop>=a-opts.scrollSnapTolerance||s)i=!0,$("#newMessages").length&&$("#newMessages").remove();else if($("#newMessages").length){var r=$("#newMessages .number").text();r=parseInt(r),r++,$("#newMessages .number").text(r),2==r&&$("#newMessages .messageWord").append("s")}else $messages.after('<a href="#" id="newMessages"><span class="number">1</span> new <span class="messageWord">message</span> <i class="icon-double-angle-down"></i></a>')}if(opts.messageCount++,opts.messageCount>=opts.messageLimit&&opts.messageLimitEnabled&&!o&&($messages.children("div.entry:nth-child(-n+"+opts.messageLimit/2+")").remove(),opts.messageCount-=opts.messageLimit/2),e===opts.lastMessage)handleStreakCounter($lastEntry),opts.messageCount--;else{var l=null;if(t&&$lastEntry.hasClass("hasGroup")&&$lastEntry.data("group")===t){l=$lastEntry[0];var p=$lastEntry.find(".streak-counter"),g=null;p.length&&(g=p.clone(!0)),$lastEntry.html(e),g&&$lastEntry.append(g),handleStreakCounter($lastEntry),opts.messageCount--}else{(l=document.createElement("div")).className="entry",t&&(l.className+=" hasGroup",l.setAttribute("data-group",t));var c=!1,h=$("<span>"+e+"</span>");$.each(opts.messageClasses,(function(e,t){(0!==h.find("."+t).length||h.hasClass(t))&&(l.className+=" "+t,c=!0)})),c||(l.className+=" misc"),opts.msgOdd&&opts.oddMsgHighlight&&(l.className+=" odd-highlight"),opts.msgOdd=!opts.msgOdd,l.innerHTML=e,$lastEntry=$($messages[0].appendChild(l)),opts.lastMessage=e}opts.highlightTerms&&opts.highlightTerms.length>0&&highlightTerms(l)}i&&!o&&window.scrollTo(0,document.body.scrollHeight)}}function outputBatch(e){for(var t=JSON.parse(e),o=$("body").height(),s=$messages.outerHeight(),i=o+document.documentElement.scrollTop>=s-opts.scrollSnapTolerance,n=0;n<t.length;n++)output(t[n].message,t[n].group,n<t.length-1,i||t[n].forceScroll)}function runByond(e){window.location=e}function setCookie(e,t,o){t=escaper(t);var s=new Date;s.setTime(s.getTime()+24*o*60*60*1e3);var i=e+"="+t+"; "+("expires="+s.toUTCString())+"; path=/";document.cookie=i}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),s=0;s<o.length;s++){for(var i=o[s];" "==i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return decoder(i.substring(t.length,i.length))}return""}function rgbToHex(e,t,o){return toHex(e)+toHex(t)+toHex(o)}function toHex(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16))}function changeMode(e){switch(e){case"geocities":case"console":opts.chatMode=e;break;default:opts.chatMode="default"}}function changeTheme(e){var t=$("body");t.removeClass(opts.currentTheme),t.addClass(e),opts.currentTheme=e,setCookie("theme",e,365)}function handleClientData(e,t,o){var s={ckey:e,ip:t,compid:o};if(opts.clientData&&!$.isEmptyObject(opts.clientData)){runByond("?action=ehjax&type=datum&datum=chatOutput&proc=analyzeClientData&param[cookie]="+JSON.stringify({connData:opts.clientData}));for(var i=0;i<opts.clientData.length;i++){var n=opts.clientData[i];if(s.ckey==n.ckey&&s.ip==n.ip&&s.compid==n.compid)return}opts.clientData.length>=opts.clientDataLimit&&opts.clientData.shift()}else runByond("?action=ehjax&type=datum&datum=chatOutput&proc=analyzeClientData&param[cookie]=none");opts.clientData.push(s),setCookie("connData",JSON.stringify(opts.clientData),365)}function ehjaxCallback(e){if("pong"==e){if(opts.pingDisabled)return;opts.pongTime=Date.now();var t=Math.ceil((opts.pongTime-opts.pingTime)/2);$("#pingMs").text(t+"ms");var o=rgbToHex(t=Math.min(t,255),255-t,0);$("#pingDot").css("color","#"+o)}else if("roundrestart"==e||"hardrestart"==e)opts.restarting=!0,output('<div class="connectionClosed internal restarting">The connection has been closed because the server is restarting. Please wait while you automatically reconnect.</div>'),"hardrestart"==e&&setTimeout((function(){runByond("byond://winset?command=.reconnect"),output('<span class="internal boldnshit">Auto reconnecting from hard restart...</span>')}),6e4);else if("stopaudio"==e)$(".dectalk").remove(),window.HTMLAudioElement&&$playMusic.get(0).pause();else{var s;try{s=$.parseJSON(e)}catch(p){return void triggerError("(ehjaxCallback data) JSON parse error for: "+e+". "+p)}if((e=s).clientData){if(opts.restarting&&(opts.restarting=!1,$(".connectionClosed.restarting:not(.restored)").addClass("restored").text("The round restarted and you successfully reconnected!")),!(e.clientData.ckey||e.clientData.ip||e.clientData.compid))return;handleClientData(e.clientData.ckey,e.clientData.ip,e.clientData.compid)}else if(e.changeTheme)changeTheme(e.changeTheme);else if(e.loadAdminCode){if(opts.adminLoaded)return;var i=e.loadAdminCode;$("body").append(i),opts.adminLoaded=!0}else if(e.loadPerfMon){if(opts.perfMonLoaded)return;var n=e.loadPerfMon;$("body").append(n),opts.perfMonLoaded=!0}else if(e.modeChange)changeMode(e.modeChange);else if(e.firebug){e.trigger?output('<span class="internal boldnshit">Loading firebug console, triggered by '+e.trigger+"...</span>"):output('<span class="internal boldnshit">Loading firebug console...</span>');var a=document.createElement("script");a.src="https://getfirebug.com/firebug-lite-debug.js",document.body.appendChild(a)}else if(e.dectalk){var r='<audio class="dectalk" src="'+e.dectalk+'" autoplay="autoplay"></audio>';e.decTalkTrigger&&(r='<a href="#" class="stopAudio icon-stack" title="Stop Audio" style="color: black;"><i class="icon-volume-off"></i><i class="icon-ban-circle" style="color: red;"></i></a> <span class="italic">You hear a strange robotic voice...</span>'+r),output(r,"preventLink")}else if(e.playMusic)if(window.HTMLAudioElement)try{("number"!=typeof e.volume||e.volume<0||e.volume>1)&&(e.volume=opts.volume),$playMusic.attr("src",e.playMusic);var l=$playMusic.get(0);l.volume=.5*e.volume,l.paused&&l.play()}catch(p){triggerError("PlayMusic: "+p+". "+JSON.stringify(e))}else output('<span class="internal boldnshit">Your IE version is too old for this music. Please upgrade to IE 9+.</span>');else if(_typeof(e.adjustVolume)!==undefined){if("number"!=typeof e.adjustVolume||e.adjustVolume<0||e.adjustVolume>1)return;if(opts.volume=e.adjustVolume,window.HTMLAudioElement)$playMusic.get(0).volume=e.adjustVolume,$(".dectalk").each((function(t,o){o.volume=e.adjustVolume}))}}}function createPopup(e,t){opts.popups++,$("body").append('<div class="popup" id="popup'+opts.popups+'" style="width: '+t+'px;">'+e+' <a href="#" class="close"><i class="icon-remove"></i></a></div>');var o=$("#popup"+opts.popups),s=o.outerHeight();o.css({height:s+"px",margin:"-"+s/2+"px 0 0 -"+t/2+"px"}),o.on("click",".close",(function(e){e.preventDefault(),o.remove()}))}function toggleWasd(e){opts.wasd="on"==e}if(Date.now||(Date.now=function(){return(new Date).getTime()}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"==typeof $){var div=document.getElementById("loading").childNodes[1];div+="<br><br>ERROR: Jquery did not load."}var readyCalled=!1;$((function(){if(!readyCalled){readyCalled=!0,$messages=$("#messages"),$subOptions=$("#subOptions"),$playMusic=$("#play-music"),setInterval((function(){if(opts.pingCounter>=opts.pingLimit&&!opts.restarting){var e=(opts.pongTime-opts.pingTime)/2;opts.pingCounter=0,opts.pongTime=0,opts.pingTime=Date.now(),runByond("?action=ehjax&window=browseroutput&type=datum&datum=chatOutput&proc=ping&param[last_ping]="+e),setTimeout((function(){opts.pongTime?opts.noResponse&&($('.connectionClosed[data-count="'+opts.noResponseCount+'"]:not(.restored)').addClass("restored").text("Your connection has been restored (probably)!"),opts.noResponse=!1):opts.noResponse||(opts.noResponse=!0,opts.noResponseCount++,output('<div class="connectionClosed internal" data-count="'+opts.noResponseCount+'">You are either experiencing lag or the connection has closed.</div>'))}),1e4)}else opts.pingCounter++}),1e3);var e={sfontSize:getCookie("fontsize"),sfontType:getCookie("fonttype"),spingDisabled:getCookie("pingdisabled"),shighlightTerms:getCookie("highlightterms"),shighlightColor:getCookie("highlightcolor"),stheme:getCookie("theme"),smessageLimitEnabled:getCookie("messageLimitEnabled"),soddMsgHighlight:getCookie("oddMsgHighlight")};if(e.sfontSize&&($messages.css("font-size",e.sfontSize),output('<span class="internal boldnshit">Loaded font size setting of: '+e.sfontSize+"</span>")),e.sfontType&&($messages.css("font-family",e.sfontType+", 'Twemoji', 'Segoe UI Emoji'"),output('<span class="internal boldnshit">Loaded font type setting of: '+e.sfontType+"</span>")),e.spingDisabled&&("true"==e.spingDisabled&&(opts.pingDisabled=!0,$("#ping").hide()),output('<span class="internal boldnshit">Loaded ping display of: '+(opts.pingDisabled?"hidden":"visible")+"</span>")),e.shighlightTerms){var t=$.parseJSON(e.shighlightTerms).filter((function(e){return null!==e&&/\S/.test(e)})),o=0!=t.length?t.join(", "):null;o&&(output('<span class="internal boldnshit">Loaded highlight strings of: '+o+"</span>"),opts.highlightTerms=t)}if(e.shighlightColor&&(opts.highlightColor=e.shighlightColor,output('<span class="internal boldnshit">Loaded highlight color of: '+e.shighlightColor+"</span>")),e.stheme){var s=$("body");s.removeClass(opts.currentTheme),s.addClass(e.stheme),opts.currentTheme=e.stheme,output('<span class="internal boldnshit">Loaded theme setting of: '+themes[e.stheme]+"</span>")}e.smessageLimitEnabled&&(opts.messageLimitEnabled=e.smessageLimitEnabled),e.soddMsgHighlight&&("true"==e.soddMsgHighlight?opts.oddMsgHighlight=!0:"false"==e.soddMsgHighlight&&(opts.oddMsgHighlight=!1)),function(){var e=getCookie("connData");if(e){var t;try{t=$.parseJSON(e)}catch(o){return void triggerError("(cookie connData) JSON parse error for: "+e+". "+o)}opts.clientData=t}}(),$("body").on("click","a",(function(e){e.preventDefault()})),$("body").on("mousedown",(function(e){var t=$(e.target);if($contextMenu&&opts.hasOwnProperty("contextMenuTarget")&&opts.contextMenuTarget)return hideContextMenu(),!1;t.is("a")||t.parent("a").length||t.is("input")||t.is("textarea")?opts.preventFocus=!0:(opts.preventFocus=!1,opts.mouseDownX=e.pageX,opts.mouseDownY=e.pageY)})),$messages.on("mousedown",(function(e){$subOptions&&$subOptions.is(":visible")&&($subOptions.slideUp("fast",(function(){$(this).removeClass("scroll"),$(this).css("height","")})),clearInterval(opts.subOptionsLoop))})),$("body").on("mouseup",(function(e){!opts.preventFocus&&e.pageX>=opts.mouseDownX-opts.clickTolerance&&e.pageX<=opts.mouseDownX+opts.clickTolerance&&e.pageY>=opts.mouseDownY-opts.clickTolerance&&e.pageY<=opts.mouseDownY+opts.clickTolerance&&(opts.mouseDownX=null,opts.mouseDownY=null,runByond("byond://winset?mainwindow.input.focus=true"))})),$messages.on("click","a",(function(e){e.preventDefault();var t=$(this).attr("href");"?"==t[0]||t.length>=8&&"byond://"==t.substring(0,8)?runByond(t):runByond("?action=openLink&link="+(t=escaper(t)))})),$("body").on("keydown",(function(e){if("INPUT"!=e.target.nodeName&&"TEXTAREA"!=e.target.nodeName&&!(e.ctrlKey||e.altKey||e.shiftKey)){var t=String.fromCharCode(e.which);return t?(e.shiftKey||(t=t.toLowerCase()),runByond("byond://winset?mainwindow.input.focus=true;mainwindow.input.text="+t),!1):(runByond("byond://winset?mainwindow.input.focus=true"),!1)}})),$(window).on("resize",(function(e){$(this).height()!==opts.priorChatHeight&&($("body,html").scrollTop($messages.outerHeight()),opts.priorChatHeight=$(this).height())})),$messages.on("click",".stopAudio",(function(){var e=$(this).parent().children("audio");e&&e.remove()})),$(window).on("scroll",(function(){var e=$("body").height(),t=$messages.outerHeight();e+$("body,html").scrollTop()>=t-opts.scrollSnapTolerance&&$("#newMessages").length&&$("#newMessages").remove()})),$("body").on("click","#newMessages",(function(e){var t=$messages.outerHeight();$("body,html").scrollTop(t),$("#newMessages").remove()})),$("#toggleOptions").click((function(e){$subOptions.is(":visible")?($subOptions.slideUp("fast",(function(){$(this).removeClass("scroll"),$(this).css("height","")})),clearInterval(opts.subOptionsLoop)):($subOptions.slideDown("fast",(function(){var e=$(window).height(),t=$("#toggleOptions").outerHeight(),o=$subOptions.outerHeight(),s=e-t;$(this).height(s),o>e-t&&$(this).addClass("scroll")})),opts.subOptionsLoop=setInterval((function(){}),5e3))})),$("#subOptions, #toggleOptions").mouseenter((function(){opts.suppressOptionsClose=!0})),$("#subOptions, #toggleOptions").mouseleave((function(){opts.suppressOptionsClose=!1})),$("#decreaseFont").click((function(e){var t=parseInt($messages.css("font-size"));t=t-1+"px",$messages.css({"font-size":t}),setCookie("fontsize",t,365),output('<span class="internal boldnshit">Font size set to '+t+"</span>")})),$("#increaseFont").click((function(e){var t=parseInt($messages.css("font-size"));t=t+1+"px",$messages.css({"font-size":t}),setCookie("fontsize",t,365),output('<span class="internal boldnshit">Font size set to '+t+"</span>")})),$("#chooseFont").click((function(e){if(!$(".popup .changeFont").is(":visible")){createPopup('<div class="head">Change Font</div><div id="changeFont" class="changeFont"><a href="#" data-font="\'Helvetica Neue\', Helvetica, Arial" style="font-family: \'Helvetica Neue\', Helvetica, Arial;">Arial / Helvetica (Default)</a><a href="#" data-font="Times New Roman" style="font-family: Times New Roman;">Times New Roman</a><a href="#" data-font="Georgia" style="font-family: Georgia;">Georgia</a><a href="#" data-font="Verdana" style="font-family: Verdana;">Verdana</a><a href="#" data-font="Wingdings" style="font-family: Wingdings;">Wingdings</a><a href="#" data-font="Comic Sans MS" style="font-family: Comic Sans MS;">Comic Sans MS</a><a href="#" data-font="Courier New" style="font-family: Courier New;">Courier New</a><a href="#" data-font="Lucida Console" style="font-family: Lucida Console;">Lucida Console</a></div>',200)}})),$("body").on("click","#changeFont a",(function(e){var t=$(this).attr("data-font");$messages.css("font-family",t+", 'Twemoji', 'Segoe UI Emoji'"),setCookie("fonttype",t,365)})),$("#chooseTheme").click((function(e){if(!$(".popup .changeTheme").is(":visible")){var t='<div class="head">Change Theme</div><div id="changeTheme" class="changeTheme">';$.each(themes,(function(e,o){t=t+'<a href="#" data-theme="'+e+'">'+o+"</a>"})),createPopup(t+="</div>",200)}})),$("body").on("click","#changeTheme a",(function(e){changeTheme($(this).attr("data-theme"))})),$("#togglePing").click((function(e){opts.pingDisabled?($("#ping").slideDown("fast"),opts.pingDisabled=!1):($("#ping").slideUp("fast"),opts.pingDisabled=!0),setCookie("pingdisabled",opts.pingDisabled?"true":"false",365)})),$("#toggleMessageLimit").click((function(e){opts.messageLimitEnabled=!opts.messageLimitEnabled,setCookie("messageLimitEnabled",opts.messageLimitEnabled,365),output('<span class="internal boldnshit">'+(opts.messageLimitEnabled?"Old messages will get deleted.":"Old messages no longer get deleted. This might cause performance issues.")+"</span>")})),$("#toggleOddMsgHighlight").click((function(e){opts.oddMsgHighlight=!opts.oddMsgHighlight,setCookie("oddMsgHighlight",opts.oddMsgHighlight,365),output('<span class="internal boldnshit">'+(opts.oddMsgHighlight?"Odd messages will be highlighted.":"Odd messages will no longer be highlighted.")+"</span>")})),$("#saveLog").click((function(e){var t="";window.XMLHttpRequest?xmlHttp=new XMLHttpRequest:xmlHttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlHttp.open("GET","https://cdn-main1.goonhub.com/css/browserOutput.css",!1),xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlHttp.send(),t+="<style>"+xmlHttp.responseText+"</style>",t+='<body class="'+opts.currentTheme+'">',t+=$messages.html(),t+="</body>";var o=new Date,s="log_"+o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()+"_"+o.getHours()+"-"+o.getMinutes()+".html";navigator.msSaveBlob(new Blob([t],{type:"text/html"}),s)})),$("#highlightTerm").click((function(e){if(!$(".popup .highlightTerm").is(":visible")){for(var t="",o=0;o<opts.highlightLimit;o++)t+='<div><input type="text" name="highlightTermInput'+o+'" id="highlightTermInput'+o+'" class="highlightTermInput'+o+'" maxlength="255" value="'+(opts.highlightTerms[o]?opts.highlightTerms[o]:"")+'" /></div>';createPopup('<div class="head">String Highlighting</div><div class="highlightPopup" id="highlightPopup"><div>Choose up to '+opts.highlightLimit+' strings that will highlight the line when they appear in chat. Regex is supported.</div><form id="highlightTermForm">'+t+'<div><input type="text" name="highlightColor" id="highlightColor" class="highlightColor" style="background-color: '+(opts.highlightColor?opts.highlightColor:"#FFFF00")+'" value="'+(opts.highlightColor?opts.highlightColor:"#FFFF00")+'" maxlength="7" /></div><div><input type="submit" name="highlightTermSubmit" id="highlightTermSubmit" class="highlightTermSubmit" value="Save" /></div></form></div>',250)}})),$("body").on("keyup","#highlightColor",(function(){var e=$("#highlightColor").val();(e=e.trim())&&"#"==e.charAt(0)&&$("#highlightColor").css("background-color",e)})),$("body").on("submit","#highlightTermForm",(function(e){e.preventDefault(),opts.highlightTerms=[];for(var t=0;t<opts.highlightLimit;t++){var o=$("#highlightTermInput"+t).val();null!==o&&/\S/.test(o)&&opts.highlightTerms.push(o)}var s=$("#highlightColor").val();""==(s=s.trim())||"#"!=s.charAt(0)?opts.highlightColor="#FFFF00":opts.highlightColor=s,$("#highlightPopup").closest(".popup").remove(),setCookie("highlightterms",JSON.stringify(opts.highlightTerms),365),setCookie("highlightcolor",opts.highlightColor,365)})),$("#clearMessages").click((function(){$messages.empty(),opts.messageCount=0})),$("body").on("click",".browser-warning .close",(function(e){e.preventDefault(),$(".browser-warning").remove()}));var i=navigator.userAgent.match(/Trident\/(\d)\.\d(?:;|$)/gi),n=document.documentMode;(n&&n<10||i&&parseInt(i)<6)&&$("body").append('<div class="browser-warning">BYOND uses IE for interfaces and we\'ve detected yours is very old.<br><strong>Please consider upgrading or some stuff might be broken for you!</strong><a href="#" class="close"><i class="icon-remove"></i></a></div>'),runByond("?action=ehjax&type=datum&datum=chatOutput&proc=doneLoading"),$("#loading").is(":visible")&&$("#loading").remove(),$("#userBar").show(),opts.priorChatHeight=$(window).height()}}));